(self.webpackChunkfirestarter=self.webpackChunkfirestarter||[]).push([[318],{318:function(t,e,s){"use strict";s.r(e),s.d(e,{CustomersModule:function(){return _}});var r=s(1116),i=s(6433),n=s(5366),o=s(9624);let a=(()=>{class t{constructor(t,e,s){this.title=t,this.meta=e,this.router=s}generateTags({title:t="",description:e="",image:s=""}){this.title.setTitle(t),this.meta.addTags([{name:"og:url",content:`https://firestarter.fireship.io${this.router.url}`},{name:"og:title",content:t},{name:"og:description",content:e},{name:"og:image",content:s},{name:"twitter:card",content:"summary"},{name:"twitter:site",content:"@fireship_dev"}])}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(o.Dx),n.LFG(o.h_),n.LFG(i.F0))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var c=s(8115),u=s(878);let m=(()=>{class t{constructor(t){this.db=t,this.customers=null}subscribeToCustomers(){this.customers||(this.subscription=this.db.collection("customers").valueChanges({idField:"id"}).subscribe(t=>{this.customers=t}))}getCustomer(t){if(this.customers){const e=this.customers.find(e=>e.id===t);return console.log("use cached"),(0,u.of)(e)}return console.log("use db"),this.db.collection("customers").doc(t).valueChanges()}dispose(){this.subscription.unsubscribe(),this.customers=null}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(c.ST))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var l=s(667),d=s(4670);function g(t,e){if(1&t&&(n.TgZ(0,"mat-list-item",3),n.TgZ(1,"mat-icon",4),n._uU(2,"account_box"),n.qZA(),n.TgZ(3,"h3"),n._uU(4),n.qZA(),n.qZA()),2&t){const t=e.$implicit;n.Q6J("routerLink",t.id),n.xp6(4),n.Oqu(t.name)}}let p=(()=>{class t{constructor(t,e,s){this.seo=t,this.db=e,this.data=s}ngOnInit(){this.seo.generateTags({title:"Customer List",description:"A list filled with customers"}),this.data.subscribeToCustomers()}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(a),n.Y36(c.ST),n.Y36(m))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-list-page"]],decls:6,vars:1,consts:[["role","list"],["mat-subheader",""],["role","listitem",3,"routerLink",4,"ngFor","ngForOf"],["role","listitem",3,"routerLink"],["mat-list-icon",""]],template:function(t,e){1&t&&(n.TgZ(0,"h1"),n._uU(1,"List Page"),n.qZA(),n.TgZ(2,"mat-nav-list",0),n.TgZ(3,"h3",1),n._uU(4,"Customers (Fake Data)"),n.qZA(),n.YNc(5,g,5,2,"mat-list-item",2),n.qZA()),2&t&&(n.xp6(5),n.Q6J("ngForOf",e.data.customers))},directives:[l.Hk,l.gs,r.sg,l.Tg,i.rH,d.Hw,l.Nh],styles:["[_nghost-%COMP%]{text-align:center;padding:24px}mat-nav-list[_ngcontent-%COMP%]{max-width:600px;background-color:#212121;padding:0;margin:0 auto}mat-list-item[_ngcontent-%COMP%]{transition:transform .3s ease}mat-list-item[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}"]}),t})();var h=s(4019),f=s(2797),Z=s(4369);function T(t,e){if(1&t&&(n.TgZ(0,"mat-card"),n.TgZ(1,"mat-card-header"),n.TgZ(2,"mat-card-title"),n._uU(3),n.qZA(),n.TgZ(4,"mat-card-subtitle"),n._uU(5,"Customer Details"),n.qZA(),n.qZA(),n._UZ(6,"img",3),n.TgZ(7,"mat-card-content"),n.TgZ(8,"p"),n._uU(9),n.qZA(),n.qZA(),n.qZA()),2&t){const t=e.ngIf;n.xp6(3),n.Oqu(t.name),n.xp6(3),n.Q6J("src",t.image,n.LSH),n.xp6(3),n.hij(" ",t.bio," ")}}const b=[{path:"",component:p},{path:":id",component:(()=>{class t{constructor(t,e,s,r){this.route=t,this.db=e,this.seo=s,this.data=r}ngOnInit(){this.customerId=this.route.snapshot.paramMap.get("id"),this.customer=this.data.getCustomer(this.customerId).pipe((0,h.b)(t=>this.seo.generateTags({title:t.name,description:t.bio,image:t.image})))}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(i.gz),n.Y36(c.ST),n.Y36(a),n.Y36(m))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-detail-page"]],decls:14,vars:4,consts:[["href","https://cards-dev.twitter.com/validator","target","blank","mat-stroked-button","","color","accent"],["mat-raised-button","","routerLink","/customers"],[4,"ngIf"],["mat-card-image","",3,"src"]],template:function(t,e){1&t&&(n.TgZ(0,"h1"),n._uU(1,"Detail Page"),n.qZA(),n.TgZ(2,"mat-card"),n.TgZ(3,"p"),n._uU(4,"This content is server rendered with Angular Universal, NestJS, and Google Cloud Run."),n.qZA(),n._uU(5," Paste URL: "),n.TgZ(6,"pre"),n._uU(7),n.qZA(),n.TgZ(8,"a",0),n._uU(9,"Twitter Card Validator"),n.qZA(),n.TgZ(10,"button",1),n._uU(11,"BACK"),n.qZA(),n.qZA(),n.YNc(12,T,10,3,"mat-card",2),n.ALo(13,"async")),2&t&&(n.xp6(7),n.hij("https://firestarter.fireship.io/customers/",e.customerId,""),n.xp6(5),n.Q6J("ngIf",n.lcZ(13,2,e.customer)))},directives:[f.a8,Z.zs,Z.lW,i.rH,r.O5,f.dk,f.n5,f.$j,f.G2,f.dn],pipes:[r.Ov],styles:["[_nghost-%COMP%]{text-align:center;padding:24px}mat-card[_ngcontent-%COMP%]{max-width:450px;background-color:#212121;margin:0 auto 10px}"]}),t})()}];let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[i.Bz.forChild(b)],i.Bz]}),t})();var A=s(8677);let _=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[r.ez,A.m,v]]}),t})()}}]);